	<!DOCTYPE HTML>
	<html>
		<head>
			<title>User Homepage</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
			<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>		
			<link rel="stylesheet" href="assets/css/main1.css" />
			<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
		    <link rel='stylesheet' href='/stylesheets/style.css' />
	    	<link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
	    	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
			<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	    	<script src="angularjs/login.js"></script>			
		</head>
		<body ng-app="LocationRecommendation" ng-controller="LocationCtrl">

			<div id="header">
					<div class="top">
							<div id="logo">
								<span class="image avatar48"><img src="http://www.fashatude.com/static/fashatude/img/user_icon.png" alt="" /></span>
								<h1 id="title">User HomePage</h1>
								<p>Explorer</p>
							</div>
							<nav id="nav">
								<ul>
									<li><a href="#top" id="top-link" class="skel-layers-ignoreHref"><span class="icon fa-home">Home</span></a></li>
									<li><button id="top-link" class="skel-layers-ignoreHref" onclick="Login()"><span class="icon fa-home">Attach my FB Profile</span></button></li>
									<li><a href="#portfolio" id="portfolio-link" class="skel-layers-ignoreHref"><span class="icon fa-plane">Plan my Trip</span></a></li>
									<li><a href="#about" id="about-link" class="skel-layers-ignoreHref"><span class="icon fa-pencil-square-o">Edit my Profile</span></a></li>
									<li><a href="#contact" id="contact-link" class="skel-layers-ignoreHref"><span class="icon fa-history">My TravelLog History</span></a></li>
								</ul>
							</nav>
					</div>
					<div class="bottom">
					</div>
			</div>			

			<div id="main">
				<section id="top" class="one dark cover">
							<div class="container">
								<header>
									<h2 class="alt"><strong><strong><strong>Welcome to TraveLog</strong></strong></strong></h2>
									<h3 class="alt"><strong>Beyond your dreams....Within your reach !</strong></h3>
								</header>
							</div>
				</section>

				<section id="portfolio" class="two">
					<div class="container">
						<header> 
							<h2>Explore.</h2>
						</header>
						<p>"The gladdest moment in human life, me thinks, is a departure into unknown lands."</p>
	   					<div style='text-align:center;'>
							<form>
						Select Country (with states):   <select ng-model="country" id="country" name ="country"></select> </br></br>
						Select State: <select ng-model="state" name ="state" id ="state"></select>  </br> </br></hr>
						Select Type of Location: 
						<select ng-model="type" name ="type" id=" type">
							<option>Historical</option>
							<option>Hill Station</option>
							<option>Adventure</option>
							<option>Scenery</option>
							<option>Sports</option>		
						</select>
						<br>
						<input type="submit"  ng-click="getData();" value="Get Trip Locations (Without Preference)"></input>
						<input type="submit"  ng-click="getData1();" value="Get Trip Locations (With Preference)"></input>
						<div class="horizontal">
							<table class="table table-striped table-bordered table-responsive">
	               			<thead>
	                  			<tr>                  
	                     		<th>Name</th>
	                     		<th>Type</th>
	                     		<th>Description</th>
	                     		<th>Country</th>
	                     		<th>State</th>
	                     		<th>Address</th>                     
	                  			</tr>
	               			</thead>
	               			<tbody>
	                  			<tr ng-repeat="item in storeItems">                  
	                     			<td>{{ item.name }}</td>
			                     	<td>{{ item.type }}</td>
		               		 		<td>{{ item.desc }}</td>
	    	           		 		<td>{{ item.country }}</td>
	        	       		 		<td>{{ item.state }}</td>
	            	   		 		<td>{{ item.address }}</td>
	               		  		</tr>
	               			</tbody>
	            			</table>
	    				</div>		
							</form>
						</div>
					</div>	
				</section>

				<section id="about" class="three">
					<div class="container">
						<header>
							<h2>About US</h2>
						</header>
						<a href="#" class="image featured"><img src="images/pic08.jpg" alt="" /></a>
						<p>Enjoy the most exotic and fun places for your next vacation. Our system will filter out the best locations for your next travel based on Country, State and Location Type Also, the fun part is, attach your Facebook Profile to your Travelog account, and get free recommendations for your next trip based on your Facebook checkins. </p>
					</div>
				</section>

				<section id="contact" class="four">
					<div class="container">
						<header>
							<h2>Contact</h2>
						</header>
						<pre>You can contact us on our following ID: Haddophunters.sjsu.edu</pre>
						<form method="post" action="#">
							<div class="row">
							    <div class="6u 12u$(mobile)"><input type="text" name="name" placeholder="Name" /></div>
								<div class="6u$ 12u$(mobile)"><input type="text" name="email" placeholder="Email" /></div>
									<div class="12u$">
											<textarea name="message" placeholder="Message"></textarea>
									</div>
									<div class="12u$">
											<input type="submit" value="Send Message" />
									</div>
							</div>
						</form>
					</div>
				</section>
			</div>

			<div id="footer">
				<ul class="copyright">
					<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://travellog.org">Travel Log</a></li>
				</ul>
			</div>

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script>
								var access,uid;

								var accessToken;
								  window.fbAsyncInit = function() {
								    FB.init({
								      appId      : '1687049591543840', // Set YOUR APP ID
								      //channelUrl : 'http://hayageek.com/examples/oauth/facebook/oauth-javascript/channel.html', // Channel File
								      status     : true, // check login status
								      cookie     : true, // enable cookies to allow the server to access the session
								      xfbml      : true  // parse XFBML
								    });
								 
								    FB.Event.subscribe('auth.authResponseChange', function(response) 
								    {
								     if (response.status === 'connected') 
								    {
								        document.getElementById("message").innerHTML +=  "<br>Connected to Facebook";
								        //SUCCESS
								 
								    }    
								    else if (response.status === 'not_authorized') 
								    {
								        document.getElementById("message").innerHTML +=  "<br>Failed to Connect";
								 
								        //FAILED
								    } else 
								    {
								        document.getElementById("message").innerHTML +=  "<br>Logged Out";
								 
								        //UNKNOWN ERROR
								    }
								    }); 
								 
								    };
								 
								    function Login()
								    {
								 
								        FB.login(function(response) {
								           if (response.authResponse) 
								           {
								               
								               //getAuthResponse(); 
								               //access= response.authResponse.accessToken;
								               uid =response.authResponse.userID;
								               getLoginStatus();
								               //alert(JSON.stringify(response.authResponse));
								        	   //getUserInfo();
								                //getCheckIns();
								            } else 
								            {
								             console.log('User cancelled login or did not fully authorize.');
								            }
								         },{scope: 'email,user_photos,user_videos'});
								 
								    }
								 
								   
								   function getLoginStatus(){


								    FB.getLoginStatus(function(response){

								      if(response.status === 'connected'){

								        var uid = response.authResponse.userID;
								        accessToken = response.authResponse.accessToken;
								        
								        
								        
								        
								        alert("This is the access token : "+accessToken);
										alert("This is the user : "+uid);
										
										
										$.ajax({
										type: "POST",
										url: "/getUID",
										data: 'uid='+uid,
										success: function(data)
										{
											alert("inside success:"+JSON.stringify(data));
											//console.log("data:"+data);
											//console.log("login:"+data.login);
											//window.location.assign('/driverselected');
										}
									}); 
										
										
								        //getLongTimeToken();

								      }



								    });

								   } 


								  function getUserInfo() {
								        FB.api('/me', function(response) {
								 
								      var str="<b>Name</b> : "+response.name+"<br>";
								          str +="<b>id: </b>"+response.id+"<br>";
								          document.getElementById("status").innerHTML=str;

								 
								    });
								    }
								  
								  
								      
								    function Logout()
								    {
								        FB.logout(function(){document.location.reload();});
								    }
								 
								  // Load the SDK asynchronously
								  (function(d){
								     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
								     if (d.getElementById(id)) {return;}
								     js = d.createElement('script'); js.id = id; js.async = true;
								     js.src = "//connect.facebook.net/en_US/all.js";
								     ref.parentNode.insertBefore(js, ref);
								   }(document));								 
			</script>
			<script type= "text/javascript" src = "\assets\js\countries.js"></script>
			<script language="javascript">
				populateCountries("country", "state");
				populateCountries("country2");
			</script>
		</body>
	</html>